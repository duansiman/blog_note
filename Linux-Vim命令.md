---
title: Vim命令
date: 2017-04-17 11:07:22
category: Linux
tags: Vim命令
---
[引用项目地址（iampkuhz/Practival-Vim）](https://github.com/iampkuhz/Practival-Vim)
---

按键说明
---
`<cr>`&emsp;回车键

`<c+char>`&emsp;表示ctrl键加字母char,其他类似

Ctrl + 字母
---

`<c+b>` 向前翻一页

`<c+d>` 向后翻半页

`<c+f>` 向后翻一页

`<c+r>` 重复上一个动作

`<c+u>` 向前翻半页


### 插入模式

`<c-x>` 将光标所在数字减1

`<c-a>` 光标所在数字的值增加1

`<c-h>` 回退一个字符

`<c-u>` 当前行光标前全部删除

`<c-w>` 回退一个单词


特殊含义说明
---
`aw` 一个word

`ap` 一个段落

`b` 跳到上一个word开头(包括当前word)

`e` 跳到下一个word结尾(包括当前word)


模式切换
---

`<c-[>` 退回到普通模式

`<c-o>` 进入插入普通模式()

缩进
---
### 向右
`>$`&emsp;当前行向右缩进一层

`><cr>` 当前行和其下一行向右缩进一层

`>N<cr>` 当前行和其下N行向右缩进一层. `>Nj` 和`>N<cr>`效果一样

### 向左
使用的是 `<`

编辑
---
`I`&emsp;在光标所在行的开头插入内容

`i`&emsp;在光标所在字符的上一个字符位置插入内容

`a`&emsp;在光标所在字符的下一个字符位置插入内容

`A`&emsp;在光标所在行的结尾插入内容

`o`&emsp;光标所在行下面另起一行

`O`光标所在行上面另起一行

删除
---
`x, X`&emsp;x 为向后删除一个字符, X为向前删除一个字符. 

`Nx`&emsp;连续向后删除N个字符

`可视模式中`选中后按`<C-g>`进入`选中模式`,再按退格键即可删除选中的文本

### c

`c` 删除并进入插入模式
	
	cw: 删除光标所在单词并进入插入模式
	c<Cr>: 删除光标所在行及下一行并进入插入模式
	c$: 删除光标到行末的文本并进入插入模式
	c^: 删除光标到行首的文本并从行首进入插入模式

### 删除word

`cw`删除光标开始的字符直到单词结尾.并进入插入模式

`db` 删除光标起始位置到单词开头位置的内容,但不删除光标所在单词

`daw` aw 指一个文本对象,理解为 delete a word

#### dw

`dw` 删除起始位置直到单词结尾的整个单词,包括起始位置

`dNw,dNW` 删除N个单词

`Ndw, NdW` 做两次(删除一个单词)

### dd

`dd`&emsp;删除光标所在这行

`Ndd`&emsp;删除游标所在向下N行

`d1G`&emsp;删除光标所在到第一行的所有数据

`dG`&emsp;删除光标所在到最后一行的所有数据

`d$`&emsp;删除游标所在处，到该行的最后一个字符

`d0`&emsp;删除游标所在处，到该行的最前面一个字符

### 回退

`<c-h>` 回退一个字符

`<c-w>` 回退一个单词

`<c-u>` 当前行光标前全部删除

复制
---
### y
`y1G`复制光标所在行到第一行的所有数据

`yG`复制光标所在行到最后一行的所有数据

`y0`复制光标所在的那个字符到该行行首的所有数据

`y$`复制光标所在的那个字符到该行行尾的所有数据

`yt<char>` 复制光标所在字符串直到字符char之前

`y/<str>` 复制光标所在字符直到遇到字符串str

粘贴
---	
`p,P` p粘贴到光标所在行的下一行,P所在行的上一行

`<c-r>0` 将刚刚复制的文本粘贴到光标所在处, `<C-r>{register}`. `<C-r><C-p>{register}` 来插入本文, 会修正不必要的缩进 

撤销
---
`u`&emsp;撤销上次修改

重复上一个动作
---
`<c+r>` ctrl + r

`.`	小数点
	
替换
---
`:%s/content/copy/g` 将文档中所有的content字符串替换为copy

`:s%/content/copy/gc` 替换前由用户确认是否替换

`r,R`r 会取代光标所在的那一个字符； R 会一直取代光标所在的文字，直到按下ESC 为止

`gR` 进入虚拟替换模式

### 多行编辑
多行相同长度编辑

	`<c-v>jje`  选择多行
	`c`			删除编辑
	`ESC` 		显示其他行的修改结果

不同长度
	
	`<c-v>jj$`
	`A;`		行尾插入;
	`ESC`

### 可视模式

`Vr-` 选中光标所在行(V), 将光标所在的字符替换成-

### 重命名

	*
	cwRenameESC
	:%s//<C-r><C-w>/g 等价于:%s//counter/g


移动、跳转（光标，Word, 行，页）
---
`h, j, k, l`&emsp;光标左，下，上，右移动

`0, $`&emsp;移动行首,行尾

`+, -`&emsp;移动下一行，上一行的非空格符号

`n<space>， n<enter>` 向右移动n 个字符, 向下移动n行

`<c+f>, <c+b>, <c+d>, <c+u>` 向后，前翻一页，向后，前翻半页	

`H, M, L` 移动到屏幕的第一行，最后一行，中间行。

### 可视模式跳转

`o` 在可视模式中光标移动到选中区域的另一端点

### g
`G, NG, gg` 移动文档最后一行,第N行，第一行

### word
`b` 跳到上一个word开头(包括当前word)

`e` 跳到下一个word结尾(包括当前word)

### 配对符号之间跳转
`%` 光标从它当前所在的括号跳转到与它相匹配的括号上去, 对花括号和圆括号, 方括号都有效

搜索
---
### 整个文件

`/` 正向查到

`?` 反向查到

### 搜索当前行的内容
`f{char}`&emsp;光标跳到当前字符后面第一个{char}字符所在位置。 `F{char}` &emsp;光标跳到当前字符前面第一个{char}字符所在位置。 

`;`&emsp;跳到下下个{char}字符,`,`&emsp;跳到上上个{char}字符

### 搜索word
`*`查找光标所在单词的下一次出现, 用*相当于 `/\<C-r><C-w\><CR>`

`#`查找光标所在单词的上一次出现

	n， N					向后，前继续搜索

算术运算
---
`<c-a>` 光标所在数字的值增加1, `N<c-a>` 将光标所在数字的值加N

`<c-x>` 将光标所在数字减1,`N<c-x>` 将光标所在数字的值减N
	
	如果光标所在单词不是数字,则在当前行向后查找数字,如果找到,则将其加一,否则,不操作
	set nrformats= 设置vim数字的进制

大小写切换
---
`g~` 大小写翻转

`gU` 单词转大写

`gu` 单词转小写

	`gUaw` 把当前词转换成大写单词
	
	`gUap` 把当前段落转换成大写单词段落
	
	`gUgU, gUU` 把当前行换成大写

### 可视模式

`U` 单词转大写

对齐
---

`=` 选中的行自动对齐 

字符或编码
---

`ga` 显示光标所在字符的Ascii码,十进制编码,十六进制编码

`<C-v>{123}` 按16进制插入字符

`<C-v>u{1234}` 按Unicode编码插入字符

`<C-v><Cr>` 之后插入回车键

`<C-k>{char1}{char2}` 成对的字符
	
	<C-k><< 插入的是 «
	<C-k>?I 插入的是 ¿
	<C-k>35 插入的是 ⅗

命令模式
---
`:! command` 离开 vi 到指令列模式下执行 command 的显示结果

`:set nu, :set nonu` 显示行数和取消行数

### 打印

`:print, :p` 将当前行的内容打印到命令行上显示
	
	:5p 光标移动到第5行并打印改行
	:2,5p 打印第二到第5行的内容(含第二行和第五行)
	:.,$p 打印当前行到最后一行的内容（.代表当前行，$代表最后一行）
	%p 打印所有行

### 可视模式
可视选取选中后按:，则命令行会预先填充:'<,'>
	
	`'<` 代表高亮选区的第一行, `'>` 代表高亮选区的最后一行j

### 复制

`:t` 是 `:copy` 的缩写, 也等价于`:co`， 可以把多行复制到其他位置
	
	:t. 把当前行复制一份放到下面一行
	:tN 把当前行复制一份放到第N行上
	:Nt. 将第N行复制到当前行下方

### 移动
`:m` 是 `:move` 的缩写，把多行移动到其他位置

### 多行编辑

`:normal {oprator}` 可以在一系列连续行上执行一条普通模式命令
	
	A;
	jVjj
	:normal . 对高亮选取的每一行，执行.命令
`:%normal A;` 表示对每一行,在结尾处插入;

`:%normal i//` 表示对每一行，在最前面插入// （注释文件）

### 命令重试
`:@:` 重复上次的Ex命令

`:@@` 使用过@@之后再重复之前的指令，使用：@@

`:bn` 等价于 :bnext 在缓冲区列表中正向移动

`:bp` 等价于 :bprevius 在缓冲区列表中逆向移动

`<C-o>` :每次使用:bnext 的时候都会在跳转列表中添加一条记录，<C-o> 会回到跳转列表的上一条记录处 (理解为回看)

### 命令补全

`<C-d>` 会列出所有可用的补全列表

`<Tab>` 会依次补全为候选（按一次，环一个候选）
	
	<Tab>, <C-n>, <Right> 正向遍历列表
	<S-Tab>, <C-p>, <Left> 反向遍历列表

### 单词插入正在编辑的命令行
`<C-r><C-w>` 怎么快速的把当前光标所在的单词插入正在编辑的命令行中

### shell命令

`:ls,:!ls` 不同，前者是vim命令，显示缓冲区内容；后者调用shell的ls

`:shell` 启动一个交互式的shell会话

#### 重定向

`:read !{cmd}` 把标准输出重定向到缓冲区

`:write !{cmd}` 把缓冲区的内容作为shell命令的标准输入

`:write! sh` 把缓冲区的内容写到sh这个文件里面

#### 排序

`2,$!sort -t',' -k2` 即可按照姓氏排序上图的条目

	2,$表示排序候选是第二行到最后一行 -t','表示按,分割字段 -k2 表示排序字段为第二列
	如果排序的是当前文档且光标就在第二行，直接使用!G (等价于:.,$!)


选中/可视模式
---

`o` 在可视模式中光标移动到选中区域的另一端点

### v

`v` 进入面向字符的可视模式

`gv` 重新选择上一次可视命令选中的位置（重选上次的高亮区域）

`V` 进入面向行的可视模式

`<C-v>` 进入面向列的可视模式
	
	`viw` 普通模式中选中光标所在单词
	
	`vit` 理解为(visually select inside the tag), 选中标签里的内容(it 指的是文本对象(text object), 一种特殊的动作命令)

寄存器
---

`<C-r>=` 表明使用表达式寄存器. `<c-r>=5*6<cr>` 没试出来

`<C-r>{register}` 把寄存器的内容粘贴到光标所在处，`<C-r><C-p>{register}` 来插入本文, 会修正不必要的缩进 